routes/auth.py
python
from flask import Blueprint, request, jsonify
from models.user import User
from werkzeug.security import generate_password_hash
from main import db

auth_routes = Blueprint('auth', __name__)

@auth_routes.route('/register', methods=['POST'])
def register():
    data = request.json
    if not data or not data.get('username') or not data.get('email') or not data.get('password'):
        return jsonify({"error": "Username, email, and password are required"}), 400
    
    if User.query.filter_by(username=data['username']).first():
        return jsonify({"error": "Username already exists"}), 400
    
    if User.query.filter_by(email=data['email']).first():
        return jsonify({"error": "Email already exists"}), 400
    
    new_user = User(
        username=data['username'],
        email=data['email'],
        password_hash=generate_password_hash(data['password'])
    )
    
    db.session.add(new_user)
    db.session.commit()
    
    return jsonify({"message": "User registered successfully!"}), 201
routes/list.py
python
from flask import Blueprint, request, jsonify
from models.list import List
from main import db
from ai.recommendations import RecommendationEngine

list_routes = Blueprint('list', __name__)

recommendation_engine = RecommendationEngine([])

@list_routes.route('/create', methods=['POST'])
def create_list():
    data = request.json
    if not data or not data.get('name') or not data.get('description') or not data.get('creator_id'):
        return jsonify({"error": "Name, description, and creator_id are required"}), 400
    
    new_list = List(
        name=data['name'],
        description=data['description'],
        creator_id=data['creator_id']
    )
    
    db.session.add(new_list)
    db.session.commit()
    
    # Update recommendation engine
    recommendation_engine.lists.append({
        'id': new_list.id,
        'description': new_list.description
    })
    
    return jsonify({"message": "List created successfully!", "list_id": new_list.id}), 201

@list_routes.route('/', methods=['GET'])
def get_lists():
    lists = List.query.all()
    return jsonify([{'id': lst.id, 'name': lst.name, 'description': lst.description} for lst in lists]), 200

@list_routes.route('/<int:list_id>', methods=['GET'])
def get_list(list_id):
    list_item = List.query.get(list_id)
    if not list_item:
        return jsonify({"error": "List not found"}), 404
    return jsonify({'id': list_item.id, 'name': list_item.name, 'description': list_item.description}), 200

@list_routes.route('/recommend', methods=['POST'])
def recommend():
    data = request.json
    if not data or not data.get('input'):
        return jsonify({"error": "Input is required"}), 400
    
    recommendations = recommendation_engine.recommend(data['input'])
    return jsonify([{'id': lst['id'], 'description': lst['description']} for lst in recommendations]), 200
routes/payment.py
python
from flask import Blueprint, request, jsonify
from models.transaction import Transaction
from main import db

payment_routes = Blueprint('payment', __name__)

@payment_routes.route('/process', methods=['POST'])
def process_payment():
    data = request.json
    if not data or not data.get('user_id') or not data.get('list_id') or not data.get('amount') or not data.get('transaction_type'):
        return jsonify({"error": "user_id, list_id, amount, and transaction_type are required"}), 400
    
    new_transaction = Transaction(
        user_id=data['user_id'],
        list_id=data['list_id'],
        amount=data['amount'],
        transaction_type=data['transaction_type']
    )
    
    db.session.add(new_transaction)
    db.session.commit()
    
    return jsonify({"message": "Transaction processed successfully!"}), 201
